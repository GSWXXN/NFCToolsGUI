<!DOCTYPE html>
<!--suppress JSValidateTypes -->
<html lang="">
<head>
    <meta charset="UTF-8" />
    <link rel="stylesheet" href="../css/index.css" />
</head>
<body>
<div id="title-bar">
    <div class="deviceConfigForm">
        <div class="select-container usb-ports-list">
            <div class="selection" onclick="if (!isConnectingDevice) showDropdown(this,event, ()=>{mainProcess.execAction('scan-usb-devices')})">
                <input type="hidden" value="" id="usb-port-value">
                <input type="text" readonly="readonly" class="selection-value" placeholder="选择设备" id="usb-port-label">
                <span class="down-arrow"></span>
            </div>
            <div class="dropdown-menus">
                <ul class="dropdown-menu" onclick="selectedValue(this, event)" data-id="usb-port"></ul>
            </div>
        </div>


        <div class="tools-list">
            <button class="bar-button" onclick="showDropdown(this, event)">
                <img class="button-img" src="../assets/icon/svg/tools.svg" alt="工具">
            </button>
            <div class="dropdown-menus">
                <ul class="dropdown-menu">
                    <li class="menu-item" onclick="mainProcess.execAction('open-history-keys')"><span class="text">编辑历史密钥</span></li>
                    <li class="menu-item" onclick="mainProcess.execAction('open-dump-editor')"><span class="text">转储编辑器</span></li>
                    <li class="menu-item" onclick="mainProcess.execAction('open-dump-comparator')"><span class="text">转储比较器</span></li>
                    <li class="menu-item" onclick="mainProcess.execAction('dump-history')"><span class="text">历史记录</span></li>
                </ul>
            </div>
<!--            <button class="bar-button" onclick="">-->
<!--                <img class="button-img" src="./assets/icon/settings.svg" alt="设置">-->
<!--            </button>-->
        </div>

        <div class="windows-control" hidden>
            <button id="minimize-app" onclick="mainProcess.minimizeWindow()">
                <img src="../assets/icon/svg/minimize.svg" alt="最小化">
            </button>
            <button id="close-app" onclick="mainProcess.closeApp()">
                <img src="../assets/icon/svg/close.svg" alt="关闭">
            </button>
        </div>
    </div>

    <div class="title">
        <img id="app-title-icon" src="../assets/icon/svg/stop.svg" alt="icon">
        <span id="app-title">NFCToolsGUI</span>
    </div>
</div>

<div class="main-button-area">
    <button class="main-button" onclick="mainProcess.execAction('read-IC')">开始解卡</button>
    <button class="main-button" onclick="mainProcess.execAction('write-IC')">一键写卡</button>
    <button class="main-button" onclick="mainProcess.execAction('format-card')">格式化</button>
    <button class="main-button" onclick="mainProcess.execAction('input-keys-read-IC')">已知密钥解卡</button>
    <button class="main-button" onclick="mainProcess.execAction('detect-card-type')">检测卡片加密</button>
    <button class="main-button" onclick="mainProcess.execAction('lock-ufuid')">锁 UFUID</button>
    <button class="main-button" onclick="mainProcess.execAction('hard-nested')">HardNested 解密</button>
    <button class="main-button" onclick="mainProcess.execAction('dict-test')">字典测试</button>
</div>

<div class="bottom-area">
    <div id="left-bar">
        <button class="bar-button" onclick="isLockScroll = !isLockScroll; $(this).children('.button-img').attr('src', isLockScroll ? './assert/icon/locked.svg' : './assert/icon/unlock.svg'); $(this).children('.tool-tip-text').html(isLockScroll ? '锁定滚动' : '自动滚动')">
            <img class="button-img" src="../assets/icon/svg/unlock.svg" alt="锁定滚动">
            <span class="tool-tip-text">锁定滚动</span>
        </button>
        <button class="bar-button" onclick="resetStatus();mainProcess.execAction('cancel-task')">
            <img class="button-img" src="../assets/icon/svg/stop.svg" alt="停止任务">
            <span class="tool-tip-text">停止任务</span>
        </button>
        <button class="bar-button" onclick="mainProcess.execAction('save-log', $('#log').val())">
            <img class="button-img" src="../assets/icon/svg/save.svg" alt="保存日志">
            <span class="tool-tip-text">保存日志</span>
        </button>
        <button class="bar-button" onclick="document.getElementById('log').value=''">
            <img class="button-img" src="../assets/icon/svg/trash.svg" alt="清除日志">
            <span class="tool-tip-text">清除日志</span>
        </button>
    </div>
    <textarea id="log" readonly>Hello cardman!</textarea>
    <div id="bottom-bar">
        <div class="bottom-bar-item" id="status" style="width: 300px">
            <div id="status-indicator"></div>
            <span id="status-text">空闲</span>
        </div>
        <div class="bottom-bar-item" id="timer" style="width: 240px">
            <img src="../assets/icon/svg/timer.svg" alt="timer">
            <span id="timer-text">计时器</span>
            <span id="timer-value"></span>
        </div>
        <div class="bottom-bar-item" id="version" style="width: 240px">
            <span id="version-text">当前版本:</span>
            <span id="version-value"></span>
            <button id="check-update">检查更新</button>
        </div>
    </div>
</div>
</body>
<script src="../js/jquery-3.6.3.min.js"></script>
<script src="../js/index.js"></script>
<script src="../js/utils.js"></script>
</html>
